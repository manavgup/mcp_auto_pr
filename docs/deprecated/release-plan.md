# MCP Workspace Release Plan

**Version:** 1.0
**Date:** August 2025
**Status:** Draft

## Overview

This document outlines the comprehensive release strategy for the MCP (Model Context Protocol) workspace containing four interconnected repositories:

- **mcp_shared_lib**: Foundation library with transport layers and Git models
- **mcp_local_repo_analyzer**: Git analysis engine for outstanding changes
- **mcp_pr_recommender**: AI-powered PR grouping recommendations
- **mcp_auto_pr**: Orchestration and deployment automation

## Release Strategy

### Phase 1: Foundation Release (v0.1.0) ✅ COMPLETED
**Target:** Stable core functionality with automated CI/CD
**Completed:** August 7, 2025

### Phase 2: Community Release (v0.2.0)
**Target:** PyPI publishing and MCP Registry submission

### Phase 3: Production Release (v1.0.0)
**Target:** Enterprise-ready with full documentation

## 1. Pre-Release Setup

### 1.1 Semantic Versioning Configuration

**Objective:** Implement automated version management and changelog generation

**Tasks:**

#### For Each Repository (mcp_shared_lib, mcp_local_repo_analyzer, mcp_pr_recommender):

- [ ] Add `python-semantic-release` to development dependencies
  ```bash
  cd <repository>
  poetry add --group dev python-semantic-release
  ```

- [ ] Configure semantic release in `pyproject.toml`:
  ```toml
  [tool.semantic_release]
  version_toml = ["pyproject.toml:tool.poetry.version"]
  branch = "main"
  changelog_file = "CHANGELOG.md"
  build_command = "poetry build"
  dist_path = "dist/"
  upload_to_pypi = false
  upload_to_repository = false
  remove_dist = false
  commit_subject = "chore(release): v{version}"
  commit_message = "chore(release): v{version}\n\nAutomatically generated by python-semantic-release"
  tag_format = "v{version}"
  ```

- [ ] Create initial `CHANGELOG.md` with historical entries
- [ ] Commit configuration changes using conventional commit format

**Definition of Done:**
- [ ] All repositories have python-semantic-release configured
- [ ] Manual version bumping works: `semantic-release version`
- [ ] Changelog generation works from git history
- [ ] Version numbers follow SemVer format (0.1.0)

### 1.2 Conventional Commits Standards

**Objective:** Standardize commit messages for automated versioning

**Commit Types:**
- `feat:` - New features (minor version bump: 0.1.0 → 0.2.0)
- `fix:` - Bug fixes (patch version bump: 0.1.0 → 0.1.1)
- `docs:` - Documentation only changes (no version bump)
- `style:` - Code style changes (no version bump)
- `refactor:` - Code refactoring (no version bump)
- `test:` - Adding or updating tests (no version bump)
- `chore:` - Build process or auxiliary tool changes (no version bump)
- `BREAKING CHANGE:` - Breaking changes (major version bump: 0.1.0 → 1.0.0)

**Example Commits:**
```
feat(analyzer): add risk assessment for uncommitted changes
fix(tools): resolve staging area detection edge case
docs: update MCP tool usage examples
BREAKING CHANGE: change tool response format for better typing
```

**Definition of Done:**
- [ ] Team understands conventional commit format
- [ ] At least 5 commits in each repo follow new format
- [ ] Commits properly trigger correct version bump types

## 2. GitHub Actions Automation

### 2.1 Release Workflow

**Objective:** Automate package building and publishing on releases

**Tasks:**

#### Create `.github/workflows/release.yml` for each repository:

- [ ] **mcp_shared_lib** release workflow
- [ ] **mcp_local_repo_analyzer** release workflow
- [ ] **mcp_pr_recommender** release workflow

**Workflow Features:**
```yaml
name: Release

on:
  release:
    types: [published]

jobs:
  publish:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - name: Install Poetry
        uses: snok/install-poetry@v1
      - name: Install dependencies
        run: poetry install
      - name: Build package
        run: poetry build
      - name: Publish to PyPI
        env:
          PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }}
        run: poetry publish --username __token__ --password $PYPI_TOKEN
      - name: Update CHANGELOG
        run: semantic-release changelog
```

**Definition of Done:**
- [ ] Release workflows created for all repositories
- [ ] Workflows successfully build packages in test mode
- [ ] PyPI tokens configured in repository secrets
- [ ] Test releases work end-to-end

### 2.2 Version Synchronization

**Objective:** Keep related packages in sync during releases

**Tasks:**

- [ ] Create workspace-level release script in `mcp_auto_pr/scripts/release.sh`
- [ ] Script validates all tests pass before release
- [ ] Script creates synchronized git tags across repositories
- [ ] Script triggers GitHub releases in correct dependency order:
  1. mcp_shared_lib (foundation)
  2. mcp_local_repo_analyzer & mcp_pr_recommender (parallel)

**Definition of Done:**
- [ ] Workspace release script successfully coordinates multi-repo releases
- [ ] Dependency versions automatically update in dependent repositories
- [ ] Integration tests pass with new versions

## 3. PyPI Publishing

### 3.1 Package Preparation

**Objective:** Ensure packages meet PyPI quality standards

**Tasks:**

#### For each package:

- [ ] **Package Metadata Validation**
  - [ ] Verify `pyproject.toml` has all required fields
  - [ ] Ensure README.md renders correctly on PyPI
  - [ ] Validate license and author information
  - [ ] Add appropriate classifiers and keywords

- [ ] **Documentation Standards**
  - [ ] README.md includes installation instructions
  - [ ] README.md includes usage examples
  - [ ] README.md includes MCP tool documentation
  - [ ] API documentation is complete

- [ ] **Security & Quality**
  - [ ] All security checks pass (bandit, safety)
  - [ ] Code coverage > 80%
  - [ ] All linting checks pass
  - [ ] Dependencies have secure versions

**PyPI Package Names:**
- `mcp-shared-lib` (foundation library)
- `mcp-local-repo-analyzer` (analyzer server)
- `mcp-pr-recommender` (recommender server)

**Definition of Done:**
- [ ] All packages build successfully with `poetry build`
- [ ] Packages install correctly with `pip install`
- [ ] Entry points work correctly after installation
- [ ] Package metadata displays properly on test PyPI

### 3.2 Publishing Process

**Objective:** Successfully publish packages to PyPI

**Tasks:**

- [ ] **Test PyPI Publishing**
  - [ ] Publish to TestPyPI first
  - [ ] Verify installation from TestPyPI
  - [ ] Test all package entry points
  - [ ] Verify MCP servers start correctly

- [ ] **Production PyPI Publishing**
  - [ ] Publish mcp-shared-lib first (dependency)
  - [ ] Publish analyzer and recommender packages
  - [ ] Verify packages appear in PyPI search
  - [ ] Test installation from production PyPI

**Definition of Done:**
- [ ] All packages available on PyPI
- [ ] Installation instructions verified
- [ ] Package pages have correct descriptions and links
- [ ] Download statistics are being tracked

## 4. MCP Registry Submission

### 4.1 Registry Preparation

**Objective:** Prepare for submission to official MCP Registry

**Tasks:**

- [ ] **Study MCP Registry Requirements**
  - [ ] Review: https://github.com/modelcontextprotocol/registry
  - [ ] Understand submission format and requirements
  - [ ] Analyze existing server submissions for patterns

- [ ] **Prepare Server Metadata**
  ```yaml
  # Example server registry entry
  name: "mcp-local-repo-analyzer"
  description: "Analyze outstanding git changes in repositories"
  author: "Manav Gupta"
  version: "0.2.0"
  repository: "https://github.com/manavgup/mcp_local_repo_analyzer"
  pypi: "mcp-local-repo-analyzer"
  capabilities:
    - "analyze_working_directory"
    - "analyze_staged_changes"
    - "get_outstanding_summary"
  transport: ["stdio", "http", "websocket"]
  ```

**Definition of Done:**
- [ ] Server metadata prepared for both analyzer and recommender
- [ ] Documentation meets MCP Registry standards
- [ ] Example usage is clear and tested
- [ ] Servers work with popular MCP clients (Claude Desktop, etc.)

### 4.2 Community Submission

**Objective:** Submit servers to MCP Registry and related repositories

**Submission Targets:**
- [ ] **Official MCP Registry**: https://github.com/modelcontextprotocol/registry
- [ ] **Anthropic MCP Servers**: https://github.com/modelcontextprotocol/servers
- [ ] **Awesome MCP Servers** (community lists)

**Definition of Done:**
- [ ] Pull requests submitted to registry repositories
- [ ] Community feedback incorporated
- [ ] Servers accepted and listed in official registries
- [ ] Download/usage metrics being tracked

## 5. GitHub Releases

### 5.1 Release Assets

**Objective:** Create professional GitHub releases with complete assets

**Tasks:**

#### For each repository release:

- [ ] **Release Notes**
  - [ ] Auto-generated changelog from conventional commits
  - [ ] Manual curation of breaking changes
  - [ ] Usage examples for new features
  - [ ] Migration guides for breaking changes

- [ ] **Release Assets**
  - [ ] Built wheel files (.whl)
  - [ ] Source distribution (.tar.gz)
  - [ ] Docker images (for mcp_auto_pr)
  - [ ] Installation scripts

- [ ] **Release Tagging Strategy**
  - [ ] Use semantic versioning tags (v0.1.0, v0.2.0, v1.0.0)
  - [ ] Consistent tagging across all repositories
  - [ ] Pre-release tags for beta versions (v0.2.0-beta.1)

**Definition of Done:**
- [ ] GitHub releases created for all repositories
- [ ] Release notes are comprehensive and user-friendly
- [ ] All release assets are tested and functional
- [ ] Release announcements published

### 5.2 Documentation Updates

**Objective:** Ensure documentation stays current with releases

**Tasks:**

- [ ] **Version-specific Documentation**
  - [ ] Update installation instructions for new versions
  - [ ] Create version compatibility matrix
  - [ ] Update Docker deployment guides
  - [ ] Refresh API documentation

- [ ] **Integration Guides**
  - [ ] MCP client integration examples
  - [ ] CI/CD pipeline integration
  - [ ] Docker deployment patterns

**Definition of Done:**
- [ ] All documentation reflects current release version
- [ ] Installation instructions are tested and accurate
- [ ] Integration examples work with released packages

## 6. Quality Assurance

### 6.1 Testing Strategy

**Objective:** Comprehensive testing before each release

**Test Levels:**

- [ ] **Unit Tests** (per repository)
  - [ ] Code coverage > 80%
  - [ ] All test suites pass
  - [ ] Performance regression tests

- [ ] **Integration Tests** (cross-repository)
  - [ ] MCP protocol compatibility
  - [ ] Transport layer functionality
  - [ ] End-to-end workflow tests

- [ ] **Release Candidate Testing**
  - [ ] Install from PyPI test packages
  - [ ] Docker deployment testing
  - [ ] MCP client compatibility testing

**Definition of Done:**
- [ ] All automated tests pass
- [ ] Manual testing checklist completed
- [ ] Performance benchmarks within acceptable ranges
- [ ] Security scans show no critical issues

### 6.2 Release Validation

**Objective:** Validate release quality before publishing

**Validation Checklist:**

- [ ] **Installation Testing**
  - [ ] Fresh virtual environment installation
  - [ ] Dependencies resolve correctly
  - [ ] Entry points executable
  - [ ] MCP servers start without errors

- [ ] **Functionality Testing**
  - [ ] Core MCP tools work as expected
  - [ ] Transport protocols function correctly
  - [ ] Error handling works properly
  - [ ] Configuration options respected

- [ ] **Documentation Testing**
  - [ ] All examples in README work
  - [ ] Installation instructions accurate
  - [ ] API documentation current

**Definition of Done:**
- [ ] All validation tests pass
- [ ] Known issues documented
- [ ] Rollback plan prepared
- [ ] Release announcement ready

## 7. Release Timeline

### Phase 1: Foundation Release (v0.1.0)
**Timeline:** Week 1-2
- [ ] Complete semantic versioning setup
- [ ] Fix any remaining CI issues
- [ ] Create initial releases on GitHub
- [ ] No PyPI publishing yet (internal testing)

### Phase 2: Community Release (v0.2.0)
**Timeline:** Week 3-4
- [ ] Publish to PyPI
- [ ] Submit to MCP Registry
- [ ] Comprehensive documentation
- [ ] Community feedback incorporation

### Phase 3: Production Release (v1.0.0)
**Timeline:** Month 2
- [ ] Enterprise-grade stability
- [ ] Complete feature set
- [ ] Professional documentation
- [ ] Support and maintenance plan

## 8. Success Metrics

### Adoption Metrics
- [ ] **PyPI Downloads**: Track weekly/monthly downloads
- [ ] **GitHub Stars**: Monitor community interest
- [ ] **MCP Registry**: Inclusion in official listings
- [ ] **Community Usage**: Issues, PRs, and discussions

### Quality Metrics
- [ ] **Test Coverage**: Maintain >80% across all repositories
- [ ] **Security Score**: All security scans pass
- [ ] **Performance**: Response time benchmarks
- [ ] **Documentation**: User feedback on clarity

### Operational Metrics
- [ ] **Release Cadence**: Regular monthly releases
- [ ] **Issue Resolution**: <1 week median response time
- [ ] **CI/CD Reliability**: >95% success rate
- [ ] **Dependency Health**: All dependencies current

## 9. Risk Mitigation

### Technical Risks
- [ ] **Breaking Changes**: Maintain backward compatibility matrix
- [ ] **Dependency Conflicts**: Test with common package combinations
- [ ] **Performance Regression**: Automated benchmark testing
- [ ] **Security Vulnerabilities**: Regular dependency audits

### Process Risks
- [ ] **Release Coordination**: Multi-repo release scripts
- [ ] **Quality Assurance**: Comprehensive test automation
- [ ] **Documentation Drift**: Automated doc generation
- [ ] **Community Support**: Clear contribution guidelines

## 10. Post-Release Activities

### Immediate (1-7 days)
- [ ] Monitor PyPI download statistics
- [ ] Address any installation issues
- [ ] Respond to community feedback
- [ ] Update project status badges

### Short-term (1-4 weeks)
- [ ] Collect user feedback and feature requests
- [ ] Plan next release improvements
- [ ] Update documentation based on usage patterns
- [ ] Security and dependency updates

### Long-term (1-3 months)
- [ ] Feature roadmap based on adoption
- [ ] Performance optimization
- [ ] Enterprise feature development
- [ ] Community contribution program

## 11. Release Checklist Summary

### Pre-Release (Required for v0.1.0)
- [ ] All repositories have semantic versioning configured
- [ ] CI/CD workflows created and tested
- [ ] Documentation is complete and accurate
- [ ] All tests pass with >80% coverage
- [ ] Security scans pass
- [ ] Manual testing completed

### Release Day
- [ ] Create GitHub releases in dependency order
- [ ] Verify all release assets are present
- [ ] Test installation from GitHub releases
- [ ] Update project documentation
- [ ] Announce release to team

### PyPI Release (v0.2.0+)
- [ ] Test on TestPyPI first
- [ ] Publish to production PyPI
- [ ] Verify package installation
- [ ] Update installation documentation
- [ ] Announce to community

### MCP Registry Submission (v0.2.0+)
- [ ] Prepare server metadata
- [ ] Submit to MCP Registry
- [ ] Respond to review feedback
- [ ] Celebrate registry inclusion!

---

## Appendix

### A. Useful Commands

```bash
# Semantic release commands
semantic-release version                    # Bump version
semantic-release changelog                  # Generate changelog
semantic-release publish                    # Full release

# Poetry commands
poetry version                             # Show current version
poetry build                               # Build package
poetry publish --repository testpypi       # Test publish
poetry publish                             # Publish to PyPI

# Testing commands
make test-all                              # Run all tests
make quality-check                         # Run quality checks
docker-compose up -d                       # Test deployment
```

### B. Resources

- [Python Semantic Release Documentation](https://python-semantic-release.readthedocs.io/)
- [Conventional Commits Specification](https://www.conventionalcommits.org/)
- [Python Packaging Guide](https://packaging.python.org/)
- [MCP Registry](https://github.com/modelcontextprotocol/registry)
- [Anthropic MCP Documentation](https://modelcontextprotocol.io/)

### C. Contact and Support

- **Project Maintainer**: Manav Gupta
- **Repository**: https://github.com/manavgup/mcp_pr_workspace
- **Issues**: Use GitHub Issues in respective repositories
- **Discussions**: GitHub Discussions for questions and feedback

---

**Document Version**: 1.0
**Last Updated**: August 2025
**Next Review**: After Phase 1 completion
